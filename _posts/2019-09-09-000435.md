---
title: "読書記録: ディジタル回路設計とコンピュータアーキテクチャ"
layout: page	
---

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="https://rcm-fe.amazon-adsystem.com/e/cm?ref=qf_sp_asin_til&t=karino203-22&m=amazon&o=9&p=8&l=as1&IS1=1&detail=1&asins=B074H9C84X&bc1=ffffff&lt1=_top&fc1=333333&lc1=0066c0&bg1=ffffff&f=ifr"> </iframe>

Kindleの半額セールを眺めてて見つけた本。
VerilogとかでMIPSを作っていく、という題材で、プロセッサを勉強する、という本。FPGAで動きそうだし、作りながら勉強出来たらいいな。

# 1章 2進数とかゲートとか

1.5の2進数とかゲートくらいまでは別段見る所は無い。

1.6のゲートの実現周りは物理的な特性の話とか出てくるので一応真面目に読む。

1.7は半導体の話。nMOSとかpMOSの話はこれまでの人生で何度も読んでるはずだが毎回わすれてるので、きっと身につかない気はする。

一章、たぶん要らない割には結構読むのに時間が掛かった。
こういうの、あんまり詳しくないので出てくる都度真面目に読んでしまうが、効率という点では飛ばした方がいいんだろうなぁ。

ただpMOSとnMOSの話はそれなりに勉強になった気もするので、読んで無駄だったという気もしない。

# 2章 組み合わせ回路とかブール代数とか

組み合わせ回路（タイミングが無い奴）も本題からすると要らなさそうなので飛ばして良いと思うのだが、
この辺もそんなにしっかりマスターしてる訳じゃないのでつい真面目に読んでしまう。

### 例題 2.10 デジタル表示のカルノーマップ

例題 2.10は暗算で解け無さそうなのでメモをここに書く。
表2.6からカルノーマップを書こう。

まずはSa。

![images/2019-09-09-000435/0000.png]({{"/assets/images/2019-09-09-000435/0000.png" | absolute_url}})

これを2のべき乗となるなるべく大きな丸でくくる。

![images/2019-09-09-000435/0001.png]({{"/assets/images/2019-09-09-000435/0001.png" | absolute_url}})

この図から読み取ると以下か？

![images/2019-09-09-000435/0002.png]({{"/assets/images/2019-09-09-000435/0002.png" | absolute_url}})

合ってそう。他はまぁいいだろう。

# 3章 順序回路

このへんまでは以前デジタル回路の本でやったはずなので、ガンガン進めてとっとと4章に入りたい。

### 3.2 ラッチとフリップフロップ

サクサク進んだところ、フリップフロップのあたりで分からない言葉がちょこちょこ出てくるので2章の該当箇所を見直し。

- 伝送ゲート
- バッファ
- トライステートバッファ
- アクティブHigh とバー

1章や2章は飛ばそうか悩んだが、軽く読んでおいて良かったな。

### 例題3.6 N進カウンタ

まずはバイナリ表現。

![images/2019-09-09-000435/0003.jpg]({{"/assets/images/2019-09-09-000435/0003.jpg" | absolute_url}})

答えを見るとS0とS1が逆だが、これはどちらでも良かろう。
S1'にS1バーがかかってる所が違うな。これ要らない気がするが。

とりあえず次のワンホットをやるか。

![images/2019-09-09-000435/0004.jpg]({{"/assets/images/2019-09-09-000435/0004.jpg" | absolute_url}})

### 例題3.9 回路からFSMの導出

練習の為やってみる。
S1がアンロックと言ってるから、これが1になればいいのかな。

まずは状態表を書く。
全通り書こうとしたら16通りくらいあって辛いので、ちょっとサボれないか考える。

1つ目のANDは、A0かA1バーならdon't careだな。この辺に着目してさぼれる所はさぼるか。

![images/2019-09-09-000435/0005.jpg]({{"/assets/images/2019-09-09-000435/0005.jpg" | absolute_url}})

この表を眺めつつ状態遷移図を描く。

![images/2019-09-09-000435/0006.jpg]({{"/assets/images/2019-09-09-000435/0006.jpg" | absolute_url}})

つまり11を入れてから01を入れると開く訳だな。

回答を見ると、出力表の所がじぶんの手順には無いな。
S1と一致してるから必要性は感じないが、正しい手順という点では作るべきだったか。

まぁこの辺は今後必要ならやる機会はあるだろうからこの位で良かろう。

### 3章後半は読むだけ

タイミング分析とかは軽く頭の中でやってみて少し間違えてたが結果は納得した、くらいで先に進む。
この手のはちゃんとマスターしようと思えばいくつか練習問題をやらないとダメそうだが、どうせあんま使わんだろう、という事で。

必要になったら戻ってきてちゃんとやる（ゆとり）

# 4章 ハードウェア記述言語

ようやく本題の4章まで来た！
少し最初の方を読んだが、やはり動かす環境が欲しいな。
とりあえず手元のFPGAを動かしてみるのが先か。

### FPGA環境設定

本はAltera前提だが、別のFPGAを借りれたので自分はこれで行く。
まずはツールをダウンロード。

Xilinxのツールを使う、との事なので、vivadoのwebpack版というのをダウンロードした。

次にツールの使い方をググって、ここを見つける。

[Getting Started with Vivado](https://reference.digilentinc.com/vivado/getting_started/start)

だいたいはこれに従うのだが、xdcファイルの所だけ具体的なボードによるので、そこだけ自分でやる。
xdcの該当する行をコメントアウトして使う。

get_portsの後にある変数名がverilog側でPort Nameとして指定できる。

という事でハードの人にいろいろ質問しつつLチカに成功！ご協力感謝。


---
title: 自分の書いたブログやtweetなどをローカルでgrepできるようにしよう
layout: page
---
[自分が過去に書いたモノを一箇所にまとめたい](https://karino2.github.io/2021/01/22/logging.html)の話を実際に実現しよう、と決心する。

### システムの名前は unimemo とする

とりあえず名前をつける。unified memoという事でunimemoに決定。

### 基本的な考え

まずGoogle Drive上に置く事にする。
対象としてはlivejournalとかmixiとかtweetとかGoogle Keepとかいろいろあるので、
それぞれのデータからmarkdownへのコンバーターをそれぞれ書く、というスタンスにする。

unimemoのルートを`/`で表すと、まずexportした生のデータを/original下に置く。

- `/original/Keep`
- `/original/mixi`
- `/original/twitter`
- `/original/...`

など。このデータはコンバートせず、何らかのexportしたものをそのまま置く事にする。
新しくデータをexportしたらここにそのまま置くだけで良い。

で、これをmarkdownにコンバートする。それはmdフォルタとする。
フォルダとしては、月までを掘って、中をどうまとめるかはコンバーターに任せる。
例えばtweetは一日単位を1ファイルにまとめる。
ブログは1記事を1ファイル、など。

- `/original`
- `/md/2020/01`
- `/md/2020/02`
- `/md/...`

ファイル名は、export元_日付_任意の文字.mdとする。任意の文字はoptional（ブログのタイトルなどを入れる）。
例えばtwitter_2020_01_07.mdとか、mixi_2020_01_07_153732.mdとか。

どういうマークダウンを作るかはコンバーター任せ。

画像は現時点ではoriginalの下にそのまま相対リンクで貼ってしまえばいいかなぁ。
数百MBというオーダーなのでmd下にコピーしてしまってもいいんだけど、とりあえずはやめておこう。

grepはmdフォルダ下で行う。

### ビュワー（は後回し）

また、マークダウンのビュワーはそのうち何か作りたい。ローカルにhttp立ち上げて月ごとにまとめるビューを、
適当なファイル数ごとにページネーションつける感じのモノと、export元ごとに見れるようなビューが欲しいかなぁ。
ただこれは後回しで良かろう。とりあえずgrep出来て、VSCodeのmarkdown previewerとかで1ファイルは見れるだろうし。

### インクリメンタルに作業出来る事を重視する

一気に作ろうとするとやる気が出ないので、まず最低限の所から始めたい。
とりあえずサービスが消えてしまう前にexportするのが第一歩。
これも全部exportしようとかいうとやる気が出ないので、とりあえず必要なtwitterから始めて徐々に進めたい。

とりあえずoriginal下に置くだけなら害は無いので、コンバーターを書くのは後回しに出来る。
気力が湧いた時にexportしていって、気力が湧いた時にコンバーターを書きたい。
ビュワーとか作る前にとりあえずexportだけ出来るように決めてしまうのが大切（たぶん）。

## twitter

一番のモチベーションは過去のtweetを適当に検索して、それがいつだったかを知りたい、なので、まずはtwitterから作業する。

### exrpot方法

twitterの設定とプライバシーから、アカウント＞データのアーカイブをダウンロード でパスワードを入れてリンクを押すと、３日後くらいにアプリやサイトに通知が来る。
リンクを押した段階ではなんか終わったふうに見えるのに何もリンクが無いので混乱するが、待てば良いだけ。

ダウンロードした結果はjsonだけが入ったtweet.jsと画像。

### コンバーター関連メモ

jsonのパースはFSharp.Dataを使う事にする。

続く。
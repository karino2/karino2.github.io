---
title: 6月中旬
layout: page
---

## 2021-06-11 (金)

パドリングのリハビリも大分進んできたのでそろそろ波乗りするかなぁ。
海行ってみたが全然波無かった。パドリングだけして帰ってくる。

最近はストレッチとかイタリア語とかも割と進められていて、生活の立て直しは進んだ気がする。

最近のAndroidではcontentResolverのopenOputputStreamでmodeがwがtruncateされなくなってwtを指定しないといけなくなった、みたいな話があるが、さらにGoogle Driveだとwtがサポートされてなくてtruncateされる、という挙動な事が判明！
せめてGoogle社内では統一してくれ…

とりあえず「いつなに」の設定画面が出来た。これで機能的には全て揃ったな。
あとはきみどり先生のアイコンが出来るまでにUI的な所をちょこちょこ修正していけばいいな。

## 2021-06-12 (土)

デバイス再起動でACTION_OPEN_DOCUMENTのuriが無効になる問題。何を試しても持ち越す事ができなかったので、SecurityExceptionが出たら再設定させる事にする。
まぁ再起動はあんまりしないのでこれでいいと言えば良い。

親の家から発掘した折りたたみ椅子をベランダで使って優雅な一時を演出する計画、布が片方とれかかっていたので、頑張って修理する。
普通の糸で縫っただけなのでそのうち切れるだろうが、切れたらまた縫おう、くらいの雑な感じで。
布が硬すぎて針が一本折れてしまった(^^;

午前中はちょうど日陰になるのでなかなか体験が良いな。生物の教科書を読みつつまったり。
横のドリンクホルダーにはマグカップは入らないのでそこはなんとかしたいなぁ。

## 2021-06-13 (日)

今日は朝どうも頭が重いので安静にする。といってもちょっと眠い程度だが。

午前中は生物の教科書をベランダで読む。ペプチド結合のあたりの解説を読む。
高校生の頃はこういう性質についての興味深さを全然理解していなかったが、今はとてもおもしろいな。
生理学とかを学ぶ前にこういう性質だけを学ぶ、というのが興味を持ちづらい理由なのだよなぁ。
応用を知ったあとだと基礎はとても興味深くなるものだが。
最短コースで下から積み上げる弊害だよなぁ。

タンパク質の一次構造とかはめっちゃ系列ラベリングっぽい問題だよなぁ、とか思う。


さっきRSSリーダーを見てたら、[はじめてのにき:材料科学](http://shinh.skr.jp/m/?date=20210531#p01)で同じような話を見て、
やはり高校とか学部生の頃に学んだ事はその面白さに当時の段階で気づくのは難しいよなぁ、とか思ったりした。
一方でこうやって我々は大人になったあとに学ぶ時に礎となっているのだからそれで良いという気もする。
（がそれってどのくらいの割合の大人なのだろう？）

## 2021-06-14 (月)

Jetpack Composeを使ってMarkdown Editorを作ろうとしている。トップレベルのブロック単位でrecomposeしたいのだが、
編集されて一つのブロックが２つに分かれたりブロックがなくなるケースがあるので、ブロックにidを振る必要がありそう。
この辺はJetpack Compose特有な設計の問題なのでなかなか面白いな。

## 2021-06-15 (火)

昨日作ったデータ構造でrecomposeするようにしようとしたが、いろいろと理解が浅い事に気づく。
composableはsetContentスコープの中でしか呼べないのだから、この中のどこかで保存したりもしなきゃいけないんだな。

composableのどこかでstateを更新する必要がある訳だよなぁ。
composableのツリーより上で保存したい場合は、そのなにかをobservableとして渡さないといけない訳だ。
でもArrayListはobservableじゃないので、ただ外のデータを渡してobservableに変換しておけば良いというものでもない。

immutableなListを毎回作り直すという前提だと、それはobservableとして通知する仕組みが無い訳だから、そうした更新はcomposableの中でやらないといけない訳だよな。

ファイルの保存はcoroutine scopeがある所でやりたいのでcomposeより上でやりたい。でもそれが終わったあとにmutableStateを更新するのはcomposeの中で起こって欲しい。
意外とこういうのをストレートに書くのは難しく、jetnewssampleではproduceStateの中とChannelで通信して中で読みなおすようになっている。
これは一般的な解決策だが、こんな事せずに済ませたい気もするよなぁ。